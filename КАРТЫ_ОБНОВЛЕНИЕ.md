# Обновление системы карт

## Исправленные проблемы

### 1. Создание карт второго уровня (дочерних карт)
- Теперь можно создавать карты внутри карт (например, детальная карта региона внутри карты мира)
- При просмотре карты кнопка "Новая карта" создаст дочернюю карту
- Навигация через хлебные крошки

### 2. Редактирование карт после создания
- Добавлена кнопка "Настроить карту" при просмотре карты
- Можно изменить:
  - Название
  - Описание
  - Изображение
  - Видимость (публичная/скрытая)
  - Доступ для конкретных участников

### 3. Видимость карт для конкретных участников
- Мастер может выбрать каких участников партии пускать на карту
- Если не выбрано - карта видна всем (при isPublished=true)
- Если выбраны конкретные участники - только они увидят карту
- Работает для корневых и дочерних карт

## Изменения в базе данных

Добавлено поле `visibleToPlayers` в таблицу `company_maps`:
- Тип: String
- Формат: ID участников через запятую
- По умолчанию: пустая строка (видна всем)

## Использование

1. Откройте раздел "Карты" в кампании
2. Создайте карту или откройте существующую
3. Нажмите "Настроить карту" для редактирования
4. В разделе "Видимость для участников" выберите конкретных игроков (опционально)
5. Сохраните изменения
